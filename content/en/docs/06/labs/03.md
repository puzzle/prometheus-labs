---
title: "6.3 Grafana Provisioning"
weight: 2
sectionnumber: 2
---

### Task 1

* Provision a duplicate of your existing data source named `provisioned_prometheus`
* Restart Grafana and test your new data source

{{% alert title="Hint" color="primary" %}}
There is a `sample.yaml` you can use as a reference in the data source provisioning folder.
{{% /alert %}}

### Task 2

* Provision a duplicate of your existing `happy_little_dashboard` dashboard named `provisioned_happy_little_dashboard`
* Provision the dashboard to the `generic` folder

{{% alert title="Hint" color="primary" %}}
There is a `sample.yaml` you can use as a reference in the dashboard provisioning folder.
{{% /alert %}}

{{% details title="Task 1" %}}

Add data source definition
```
sudo bash -c 'cat <<EOF > /etc/grafana/provisioning/datasources/prometheus.yaml
apiVersion: 1
datasources:
  - name: provisioned_prometheus
    type: prometheus
    access: proxy
    url: http://localhost:9090
EOF'
```

Restart Grafana Server

```
sudo systemctl restart grafana-server.service
```

{{% /details %}}

{{% details title="Task 2" %}}

* Add dashboard definition configuration

```
sudo bash -c 'cat <<EOF > /etc/grafana/provisioning/dashboards/default.yaml
apiVersion: 1
providers:
  - name: 'default'
    folder: 'generic'
    options:
      path: /var/lib/grafana/dashboards
EOF'
```

* In Grafana UI, navigate to your dashboard
  * Select the `gear` button -> JSON Model
  * Copy the json and save it to `/var/lib/grafana/dashboards/happy_little_dashboard.json`

{{% /details %}}

